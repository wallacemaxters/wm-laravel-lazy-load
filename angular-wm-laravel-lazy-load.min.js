angular.module("wm.laravel-lazy-load",["ng"]).service("WMLaravelLazyLoad",["$http",function(b){function a(d,f,c){var e=this;e.url=d;e.params=f||{};e.data=[];
e.info={from:0,last_page:0,per_page:0,to:0,total:0,};e.busy=false;e.completed=false;c||e.next();}a.prototype.remove=function(d){var c=this.data.indexOf(d);
if(c>=0){return this.data.splice(c,1);}};a.prototype.untilCompleted=function(){var c=this,d;d=c.next();d&&d.then(function(){c.untilCompleted();});};a.prototype.next=function(){var c,d;
c=this;d=c.params;d.page=c.info.next_page||1;if(c.busy||c.completed){return;}c.busy=true;return b({url:c.url,params:d,}).then(function(e){c.data=c.data.concat(e.data.data);
delete e.data.data;angular.extend(c.info,e.data);c.completed=(c.info.last_page==c.info.current_page);c.busy=false;if(!c.completed){c.info.next_page=d.page+1;
}return e;});};return a;}]);